<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>SL AUTO - Garage Automobile</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/styles.css">
    <style>
      body {
        background: linear-gradient(120deg, #f8fafc 0%, #e0e7ff 100%);
        color: #23272a;
        font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
        min-height: 100vh;
      }
      .mechanic-header {
        background: linear-gradient(90deg, #eab308 0%, #facc15 100%);
        box-shadow: 0 4px 24px #eab30833;
        padding-bottom: 12px;
      }
      .mechanic-title {
        color: #23272a;
        font-size: 2.7rem;
        font-weight: bold;
        letter-spacing: 2px;
        text-shadow: 0 2px 8px #fff8, 0 1px 0 #eab30855;
      }
      .cta-btn, #cta-rdv-popup {
        background: linear-gradient(90deg, #22c55e 0%, #3b82f6 100%);
        color: #fff;
        border: none;
        border-radius: 8px;
        padding: 16px 36px;
        font-size: 1.2rem;
        font-weight: bold;
        box-shadow: 0 2px 16px #3b82f655;
        cursor: pointer;
        margin-top: 32px;
        transition: background 0.2s, transform 0.2s;
      }
      .cta-btn:hover, #cta-rdv-popup:hover {
        background: linear-gradient(90deg, #3b82f6 0%, #22c55e 100%);
        transform: scale(1.05);
      }
      .services-list {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 32px;
        margin: 48px 0 32px 0;
      }
      .service-card {
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 4px 24px #eab30822;
        padding: 32px 28px 24px 28px;
        width: 260px;
        text-align: center;
        transition: box-shadow 0.2s, transform 0.2s;
      }
      .service-card:hover {
        box-shadow: 0 8px 32px #3b82f655;
        transform: translateY(-6px) scale(1.03);
      }
      .service-icon {
        font-size: 2.7rem;
        margin-bottom: 12px;
        color: #eab308;
        filter: drop-shadow(0 2px 8px #facc1555);
      }
      .service-title {
        font-size: 1.2rem;
        font-weight: bold;
        margin-bottom: 8px;
      }
      .service-desc {
        color: #555;
        font-size: 1rem;
      }
      #hero-bg-video {
        filter: brightness(0.7) blur(1px);
      }
      .hero-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(255,255,255,0.85);
        border-radius: 18px;
        padding: 36px 48px;
        box-shadow: 0 4px 32px #eab30833;
        text-align: center;
      }
      .hero-content h2 {
        color: #3b82f6;
        font-size: 2.1rem;
        font-weight: bold;
        text-shadow: 0 2px 8px #fff8;
      }
      .hero-content p {
        color: #555;
        font-size: 1.2rem;
        margin: 18px 0 32px 0;
      }
    </style>
    <!-- Flatpickr Calendar CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
    <div id="page-loader" class="loader-premium">
      <div class="loader-wheel-premium">
        <img src="assets/loader-wheel.svg" alt="Chargement..." />
        <div class="loader-light"></div>
      </div>
    </div>
    <style>
    .loader-premium {
      display: flex;
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: radial-gradient(ellipse at center, #23272a 80%, #111 100%);
      z-index: 9999;
      justify-content: center;
      align-items: center;
      transition: opacity 0.4s;
      opacity: 1;
    }
    .loader-wheel-premium {
      position: relative;
      width: 110px; height: 110px;
      display: flex; justify-content: center; align-items: center;
    }
    .loader-wheel-premium img {
      width: 90px;
      box-shadow: 0 4px 32px #eab30855, 0 2px 12px #23272a99;
      border-radius: 50%;
      background: #23272a;
      padding: 12px;
      animation: spin 1.1s linear infinite;
    }
    .loader-light {
      position: absolute;
      top: 0; left: 0;
      width: 110px; height: 110px;
      border-radius: 50%;
      background: conic-gradient(from 0deg, #eab30844 0deg 60deg, transparent 60deg 360deg);
      animation: rotate-light 1.1s linear infinite;
      pointer-events: none;
    }
    @keyframes spin { 100% { transform: rotate(360deg); } }
    @keyframes rotate-light { 100% { transform: rotate(360deg); } }
    </style>
    <script>
window.addEventListener('load', function() {
    setTimeout(function() {
        document.getElementById('page-loader').style.opacity = 0;
        setTimeout(function() {
            document.getElementById('page-loader').style.display = 'none';
        }, 400);
    }, 900);
});
document.querySelectorAll('.mechanic-nav a').forEach(link => {
    link.addEventListener('click', function(e) {
        if (this.getAttribute('href') && !this.getAttribute('href').startsWith('#')) {
            document.getElementById('page-loader').style.opacity = 1;
            document.getElementById('page-loader').style.display = 'flex';
        }
    });
});
    </script>
    <header class="mechanic-header">
    <div class="header-content mechanic-header-content">
      <div class="logo mechanic-logo">
        <div class="logo mechanic-logo logo-glow" style="position:relative;">
          <div style="position:relative;display:inline-block;">
            <img src="assets/logo1.png" alt="Logo SL AUTO" class="logo-img mlem-logo" style="position:relative;z-index:2;filter:drop-shadow(0 0 16px #ffe066cc) drop-shadow(0 0 32px #ffd70088);">
            <div class="logo-mlem-shine"></div>
          </div>
          <div class="logo-glow-anim" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:120px;height:120px;border-radius:50%;background:radial-gradient(circle,rgba(255,224,102,0.32) 0%,rgba(255,215,0,0.13) 70%,transparent 100%);filter:blur(14px);z-index:1;animation:glowPulse 2.5s infinite alternate;"></div>
    <style>
    .logo-mlem-shine {
      pointer-events: none;
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      border-radius: 50%;
      overflow: hidden;
      z-index: 3;
    }
    .logo-mlem-shine::before {
      content: '';
      position: absolute;
      top: -60%; left: -60%;
      width: 220%; height: 220%;
      background: linear-gradient(120deg, rgba(255,255,255,0.0) 38%, rgba(255,224,102,0.18) 44%, rgba(255,255,255,0.55) 50%, rgba(255,224,102,0.18) 56%, rgba(255,255,255,0.0) 62%);
      box-shadow: 0 0 32px 8px #ffe06644;
      transform: rotate(25deg);
      animation: mlemShine 2.8s linear infinite;
    }
    @keyframes mlemShine {
      0% { left: -60%; top: -60%; }
      100% { left: 60%; top: 60%; }
    }
    </style>
        </div>
      <h1 class="mechanic-title">SL AUTO 86</h1>
    </div>
        <nav class="mechanic-nav">
  <a href="index.html" class="active">Accueil</a>
  <a href="rdv.html">Prendre rendez-vous</a>
  <a href="contact.html">Contact</a>
        </nav>
    </header>
    <main>
      <section id="hero" style="position:relative;height:420px;overflow:hidden;">
        <video autoplay loop muted playsinline id="hero-bg-video" style="width:100vw;height:420px;object-fit:cover;"><source src="assets/garage-animated.mp4" type="video/mp4"></video>
        <div class="hero-overlay" style="position:absolute;top:0;left:0;width:100vw;height:420px;pointer-events:none;background:linear-gradient(120deg,rgba(255,255,255,0.55) 0%,rgba(234,179,8,0.18) 100%);mix-blend-mode:lighten;"></div>
        <div class="hero-content">
          <h2>Bienvenue chez SL AUTO 86</h2>
          <p>Votre garage automobile de confiance à Poitiers : entretien, réparation, carrosserie, diagnostic et plus encore.</p>
          <button id="btn-open-devis-ia" class="cta-btn" style="background:#eab308;color:#23272a;font-weight:bold;border:none;padding:18px 44px;border-radius:12px;box-shadow:0 2px 12px #eab30844;cursor:pointer;font-size:1.25em;transition:background 0.2s;text-align:center;">Prendre rendez-vous</button>
    <div id="devis-ia-modal" style="display:none;position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:rgba(36,36,36,0.38);backdrop-filter:blur(2px);align-items:center;justify-content:center;">
      <div id="devis-ia-card" style="max-width:540px;background:linear-gradient(120deg,#fffbe6 80%,#facc15 100%);border-radius:22px;box-shadow:0 8px 40px #eab30844,0 2px 12px #23272a22;padding:36px 28px 32px 28px;position:relative;overflow:hidden;margin:auto;">
        <button id="close-devis-ia" style="position:absolute;top:18px;right:18px;background:none;border:none;font-size:1.7em;color:#eab308;cursor:pointer;">&times;</button>
        <div style="display:flex;align-items:center;justify-content:center;margin-bottom:18px;gap:14px;">
          <span style="font-size:2.2em;color:#eab308;animation:carAnim 1.2s infinite alternate cubic-bezier(.6,-0.28,.74,1.25);">&#128663;</span>
          <h2 style="color:#23272a;font-size:1.5em;font-weight:700;letter-spacing:0.01em;">Devis instantané par IA</h2>
        </div>
        <form id="form-devis-ia" style="display:flex;flex-direction:column;gap:14px;align-items:center;">
          <input type="text" name="immatriculation" placeholder="Plaque d'immatriculation (ex: AB-123-CD)" required style="padding:12px 14px;border-radius:8px;border:1.5px solid #eab30888;font-size:1.08em;width:100%;max-width:340px;">
          <input type="email" name="email" placeholder="Votre email" required style="padding:12px 14px;border-radius:8px;border:1.5px solid #eab30888;font-size:1.08em;width:100%;max-width:340px;">
          <textarea name="reparation" placeholder="Décrivez la réparation à faire (ex: changement de courroie, vidange, carrosserie...)" required style="padding:12px 14px;border-radius:8px;border:1.5px solid #eab30888;font-size:1.08em;width:100%;max-width:340px;min-height:80px;"></textarea>
          <button type="submit" style="background:linear-gradient(90deg,#22c55e 80%,#a3e635 100%);color:#23272a;font-weight:bold;border:none;padding:13px 0;border-radius:8px;font-size:1.13em;width:100%;max-width:340px;cursor:pointer;box-shadow:0 2px 8px #22c55e33;transition:transform 0.18s,box-shadow 0.18s;">Valider la demande</button>
          <div id="devis-ia-result" style="display:none;margin-top:18px;color:#22c55e;font-weight:bold;"></div>
        </form>
      </div>
      <style>
      @keyframes btnPulse { 0%{box-shadow:0 0 0 #eab30844;} 100%{box-shadow:0 0 24px #eab30888;} }
      @keyframes fadeIn { from{opacity:0;transform:translateY(30px);} to{opacity:1;transform:translateY(0);} }
      @keyframes carAnim { from{transform:translateY(0);} to{transform:translateY(-8px);} }
      #devis-ia-card input:focus, #devis-ia-card textarea:focus {
          border-color: #facc15;
          box-shadow: 0 0 0 2px #eab30844;
          outline: none;
      }
      #devis-ia-card button:active {
          transform: scale(0.97);
          box-shadow: 0 1px 4px #eab30844;
      }
      </style>
    </div>
<script>
// Modal IA devis
const btnOpenDevis = document.getElementById('btn-open-devis-ia');
const modalDevis = document.getElementById('devis-ia-modal');
const closeDevis = document.getElementById('close-devis-ia');
const formDevis = document.getElementById('form-devis-ia');
if(btnOpenDevis) btnOpenDevis.onclick = function(e) {
  e.preventDefault();
  modalDevis.style.display = 'flex';
  modalDevis.style.animation = 'fadeIn 0.5s';
};
if(closeDevis) closeDevis.onclick = function() {
  modalDevis.style.display = 'none';
};
// Fermer la modal si clic en dehors du card
if(modalDevis) modalDevis.onclick = function(e) {
  if(e.target === modalDevis) modalDevis.style.display = 'none';
};
// Simulation IA avancée (identification véhicule + main d'oeuvre)
if(formDevis) formDevis.onsubmit = function(e) {
  e.preventDefault();
  const immat = this.immatriculation.value.trim().toUpperCase();
  const email = this.email.value.trim();
  const repar = this.reparation.value.trim();
  if(!immat || !email || !repar) return;
  let vehicules = {
    'AB-123-CD': 'Peugeot 208',
    'AA-456-BB': 'Renault Clio',
    'ZZ-999-YY': 'Citroën C3',
    'BG-456-TR': 'Volkswagen Golf',
    'DF-789-GH': 'Toyota Yaris'
  };
  let vehicule = vehicules[immat] || 'Véhicule non identifié (simulation)';
  let base = 80;
  if(/carrosserie|peinture|bosses|rayures/i.test(repar)) base += 120;
  if(/courroie|distribution|embrayage/i.test(repar)) base += 180;
  if(/vidange|huile|filtre/i.test(repar)) base += 40;
  if(/diagnostic|panne|voyant/i.test(repar)) base += 60;
  let prix = base + Math.floor(Math.random()*60);
  let delai = 1 + Math.floor(Math.random()*4);
  let message = `<div style='font-size:1.13em;'><span style='font-size:1.5em;color:#eab308;'>&#128663;</span><br>Pour le véhicule <b>${vehicule}</b> (plaque <b>${immat}</b>),<br>réparation demandée : <b>${repar}</b>.<br><span style='color:#22c55e;'>Estimation main d'oeuvre : <b>${prix}€</b> TTC</span>, délai : <b>${delai} jour(s)</b>.<br><span style='color:#eab308;'>Un email de confirmation sera envoyé à <b>${email}</b> (simulation).</span></div>`;
  const result = document.getElementById('devis-ia-result');
  result.innerHTML = message;
  result.style.display = 'block';
  this.reset();
};
</script>
        </div>
    <style>
    @keyframes glowPulse {
      0% { opacity: 0.7; filter: blur(8px); }
      100% { opacity: 1; filter: blur(16px); }
    }
    </style>
      </section>
      <section class="services-list">
        <div class="service-card">
          <div class="service-icon">🔧</div>
          <div class="service-title">Entretien & Révision</div>
          <div class="service-desc">Vidange, filtres, freins, climatisation, contrôle complet.</div>
        </div>
        <div class="service-card">
          <div class="service-icon">🚗</div>
          <div class="service-title">Carrosserie & Peinture</div>
          <div class="service-desc">Réparation, débosselage, peinture, rénovation optiques.</div>
        </div>
        <div class="service-card">
          <div class="service-icon">💡</div>
          <div class="service-title">Diagnostic & Électronique</div>
          <div class="service-desc">Diagnostic électronique, recherche de panne, reprogrammation.</div>
        </div>
        <div class="service-card">
          <div class="service-icon">🛠️</div>
          <div class="service-title">Réparations mécaniques</div>
          <div class="service-desc">Embrayage, distribution, suspension, échappement, etc.</div>
        </div>
      </section>
        <section id="rdv">
            <!-- Formulaire déplacé sur rdv.html -->
            <div id="planning">
                <h3>Planning des rendez-vous</h3>
                <ul id="rdv-list"></ul>
            </div>
        </section>
    </main>
    <footer>
  <p>&copy; 2025 SL AUTO - Tous droits réservés</p>
    </footer>
    <script src="js/main.js"></script>
</body>
<!-- Flatpickr Calendar JS + French locale -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/fr.js"></script>
<script>
// --- Gestion avancée des créneaux de rendez-vous ---
const SERVICE_DURATIONS = {
  'Révision': 5,
  'Diagnostic': 2,
  'Carrosserie': 12
};

function getReservedSlotsWithDuration() {
  const rdvs = JSON.parse(localStorage.getItem('rdvs') || '[]');
  // On ne prend que les rendez-vous validés
  return rdvs.filter(r => r.statut === 'validé').map(r => {
    const start = new Date(r.date.replace(' ', 'T'));
    const duration = SERVICE_DURATIONS[r.service] || 1;
    return {
      start,
      end: new Date(start.getTime() + duration * 60 * 60 * 1000)
    };
  });
}

function isSlotAvailable(date, service) {
  // Jour ouvré ?
  const day = date.getDay();
  if (day === 0 || day === 6) return false; // 0=dimanche, 6=samedi
  // Heure ouvrée ?
  const hour = date.getHours();
  if (hour < 9 || hour >= 18) return false;
  // Délai minimum 24h
  const now = new Date();
  if (date.getTime() < now.getTime() + 24*60*60*1000) return false;
  // Doit finir avant 18h
  const duration = SERVICE_DURATIONS[service] || 1;
  const slotStart = date;
  const slotEnd = new Date(slotStart.getTime() + duration * 60 * 60 * 1000);
  if (slotEnd.getHours() > 18 || (slotEnd.getHours() === 18 && slotEnd.getMinutes() > 0)) return false;
  // On ne bloque PAS les créneaux déjà demandés, seulement ceux validés (voir getReservedSlotsWithDuration)
  return true;
}

let selectedService = 'Révision';


const fp = flatpickr("#date", {
  enableTime: true,
  dateFormat: "Y-m-d H:i",
  time_24hr: true,
  minuteIncrement: 15,
  locale: flatpickr.l10ns.fr,
  minDate: "today",
  // Pas de disable JS, tout est vérifié à la soumission
});

// Validation côté JS du créneau choisi lors de la soumission du formulaire
const form = document.getElementById('rdv-form');
if(form) {
  form.addEventListener('submit', function(e) {
    const dateInput = document.getElementById('date');
    const serviceInput = document.getElementById('service');
    const dateStr = dateInput.value;
    const service = serviceInput.value;
    if(dateStr && service) {
      const date = new Date(dateStr.replace(' ', 'T'));
      // Vérification détaillée
      const day = date.getDay();
      if (day === 0 || day === 6) {
        e.preventDefault();
        alert("❌ Les rendez-vous ne sont possibles que du lundi au vendredi.");
        return false;
      }
      const hour = date.getHours();
      if (hour < 9) {
        e.preventDefault();
        alert("❌ Les rendez-vous ne peuvent pas être pris avant 9h du matin.");
        return false;
      }
      // Délai minimum 24h
      const now = new Date();
      if (date.getTime() < now.getTime() + 24*60*60*1000) {
        e.preventDefault();
        alert("❌ Vous devez réserver au moins 24h à l'avance.");
        return false;
      }
      // Doit finir avant 18h, et pas commencer trop tard
      const duration = SERVICE_DURATIONS[service] || 1;
      const slotEnd = new Date(date.getTime() + duration * 60 * 60 * 1000);
      if (slotEnd.getHours() > 18 || (slotEnd.getHours() === 18 && slotEnd.getMinutes() > 0)) {
        e.preventDefault();
        alert("❌ Ce service est trop long pour finir avant 18h. Merci de choisir un créneau plus tôt.");
        return false;
      }
      // Interdiction de commencer un service moins de 2h avant la fermeture
      if (hour >= 16) {
        // Pour tous les services, on interdit de commencer à partir de 16h (18h-2h)
        e.preventDefault();
        alert("❌ Vous ne pouvez pas réserver un créneau moins de 2h avant la fermeture (18h). Merci de choisir un horaire plus tôt.");
        return false;
      }
      // On ne bloque PAS les créneaux déjà demandés, seulement ceux validés
      // (la logique de chevauchement n'est appliquée qu'aux validés)
    }
  });
}
</script>
<script>
// Désactive clic droit
window.addEventListener('contextmenu', function(e) { e.preventDefault(); });
// Désactive F12, Ctrl+Shift+I, Ctrl+U
window.addEventListener('keydown', function(e) {
    if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'i') || (e.ctrlKey && e.key.toLowerCase() === 'u')) {
        e.preventDefault();
        return false;
    }
});
</script>
<!-- Popup formulaire RDV -->

<style>
#rdv-popup {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  z-index: 99999;
  justify-content: center;
  align-items: center;
  background: radial-gradient(ellipse at center, #23272a 80%, #111 100%);
  animation: fadeInBg 0.5s;
}
@keyframes fadeInBg { from { opacity: 0; } to { opacity: 1; } }
.rdv-popup-content {
  background: linear-gradient(135deg, #fffbe6 0%, #fff 100%);
  padding: 38px 24px 28px 24px;
  border-radius: 22px;
  max-width: 420px;
  width: 98vw;
  box-shadow: 0 6px 36px #eab30888, 0 2px 12px #23272a55;
  position: relative;
  animation: popupAppear 0.5s;
}
@keyframes popupAppear { from { transform: scale(0.92); opacity: 0; } to { transform: scale(1); opacity: 1; } }
.rdv-popup-content h2 {
  color: #23272a;
  text-align: center;
  margin-bottom: 22px;
  font-size: 1.5rem;
  font-weight: 700;
  letter-spacing: 1px;
}
#close-rdv-popup {
  position: absolute;
  top: 12px; right: 12px;
  background: #eab308;
  color: #23272a;
  border: none;
  border-radius: 8px;
  padding: 4px 12px;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 2px 8px #23272a22;
  transition: background 0.2s;
}
#close-rdv-popup:hover {
  background: #ffd700;
}
#rdv-form-index {
  display: flex;
  flex-direction: column;
  gap: 12px;
}
#rdv-form-index input,
#rdv-form-index select {
  width: 100%;
  padding: 10px 14px 10px 38px;
  border: 1.5px solid #eab308;
  border-radius: 10px;
  background: #fff;
  font-size: 1rem;
  color: #23272a;
  box-shadow: 0 1px 6px #eab30822;
  transition: border 0.2s, box-shadow 0.2s;
  outline: none;
  position: relative;
}
#rdv-form-index input:focus,
#rdv-form-index select:focus {
  border-color: #23272a;
  box-shadow: 0 2px 12px #eab30844;
}
#rdv-form-index input[type="datetime-local"]::-webkit-calendar-picker-indicator {
  filter: invert(0.7) sepia(1) saturate(5) hue-rotate(10deg);
}
#rdv-form-index button[type="submit"] {
  width: 100%;
  background: linear-gradient(90deg, #eab308 60%, #ffd700 100%);
  color: #23272a;
  font-weight: bold;
  padding: 12px 0;
  border: none;
  border-radius: 10px;
  font-size: 1.1rem;
  box-shadow: 0 2px 12px #eab30855;
  cursor: pointer;
  transition: background 0.2s, box-shadow 0.2s;
}
#rdv-form-index button[type="submit"]:hover {
  background: linear-gradient(90deg, #ffd700 60%, #eab308 100%);
  box-shadow: 0 4px 18px #eab30899;
}
.rdv-icon {
  position: absolute;
  left: 14px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 1.1em;
  color: #eab308;
  pointer-events: none;
}
.rdv-field {
  position: relative;
}
</style>
<div id="rdv-popup">
  <div class="rdv-popup-content">
    <div style="max-height:80vh;overflow-y:auto;padding-bottom:12px;">
      <button id="close-rdv-popup">X</button>
      <h2>Prendre rendez-vous</h2>
      <form id="rdv-form-index">
      <div style="margin-bottom:18px;padding:12px 10px;background:#fffbe6;border-radius:12px;border:1px solid #eab30833;box-shadow:0 2px 8px #eab30822;display:flex;flex-direction:column;align-items:stretch;gap:6px;">
        <span style="color:#eab308;font-size:1em;font-weight:500;">Votre nom de famille.</span>
        <label for="lastname-index" style="font-weight:500;color:#23272a;font-size:1.05em;">Nom :</label>
        <input type="text" id="lastname-index" name="lastname" required style="padding:10px 12px;border-radius:8px;border:1px solid #eab30855;font-size:1em;background:#f8fafc;color:#23272a;width:100%;box-sizing:border-box;">
      </div>
      <div style="margin-bottom:18px;padding:12px 10px;background:#fffbe6;border-radius:12px;border:1px solid #eab30833;box-shadow:0 2px 8px #eab30822;display:flex;flex-direction:column;align-items:stretch;gap:6px;">
        <span style="color:#eab308;font-size:1em;font-weight:500;">Votre prénom usuel.</span>
        <label for="firstname-index" style="font-weight:500;color:#23272a;font-size:1.05em;">Prénom :</label>
        <input type="text" id="firstname-index" name="firstname" required style="padding:10px 12px;border-radius:8px;border:1px solid #eab30855;font-size:1em;background:#f8fafc;color:#23272a;width:100%;box-sizing:border-box;">
      </div>
      <div style="margin-bottom:18px;padding:12px 10px;background:#fffbe6;border-radius:12px;border:1px solid #eab30833;box-shadow:0 2px 8px #eab30822;display:flex;flex-direction:column;align-items:stretch;gap:6px;">
        <span style="color:#eab308;font-size:1em;font-weight:500;">Marque et modèle du véhicule (ex : Peugeot 208).</span>
        <label for="vehicule-index" style="font-weight:500;color:#23272a;font-size:1.05em;">Véhicule :</label>
        <input type="text" id="vehicule-index" name="vehicule" required style="padding:10px 12px;border-radius:8px;border:1px solid #eab30855;font-size:1em;background:#f8fafc;color:#23272a;width:100%;box-sizing:border-box;">
      </div>
      <div style="margin-bottom:18px;padding:12px 10px;background:#fffbe6;border-radius:12px;border:1px solid #eab30833;box-shadow:0 2px 8px #eab30822;display:flex;flex-direction:column;align-items:stretch;gap:6px;">
        <span style="color:#eab308;font-size:1em;font-weight:500;">Type de véhicule (citadine, SUV, utilitaire...)</span>
        <label for="categorie-index" style="font-weight:500;color:#23272a;font-size:1.05em;">Catégorie :</label>
        <select id="categorie-index" name="categorie" required style="padding:10px 12px;border-radius:8px;border:1px solid #eab30855;font-size:1em;background:#f8fafc;color:#23272a;width:100%;box-sizing:border-box;">
          <option value="">Catégorie...</option>
          <option value="Citadine">Citadine</option>
          <option value="Berline">Berline</option>
          <option value="SUV">SUV</option>
          <option value="Utilitaire">Utilitaire</option>
          <option value="Autre">Autre</option>
        </select>
      </div>
      <div style="margin-bottom:18px;padding:12px 10px;background:#fffbe6;border-radius:12px;border:1px solid #eab30833;box-shadow:0 2px 8px #eab30822;display:flex;flex-direction:column;align-items:stretch;gap:6px;">
        <span style="color:#eab308;font-size:1em;font-weight:500;">Pour recevoir la confirmation et les infos du rendez-vous.</span>
        <label for="email-index" style="font-weight:500;color:#23272a;font-size:1.05em;">Email :</label>
        <input type="email" id="email-index" name="email" required style="padding:10px 12px;border-radius:8px;border:1px solid #eab30855;font-size:1em;background:#f8fafc;color:#23272a;width:100%;box-sizing:border-box;">
      </div>
      <div style="margin-bottom:18px;padding:12px 10px;background:#fffbe6;border-radius:12px;border:1px solid #eab30833;box-shadow:0 2px 8px #eab30822;display:flex;flex-direction:column;align-items:stretch;gap:6px;">
        <span style="color:#eab308;font-size:1em;font-weight:500;">Pour vous joindre en cas de besoin ou rappel.</span>
        <label for="phone-index" style="font-weight:500;color:#23272a;font-size:1.05em;">Téléphone :</label>
        <input type="tel" id="phone-index" name="phone" required style="padding:10px 12px;border-radius:8px;border:1px solid #eab30855;font-size:1em;background:#f8fafc;color:#23272a;width:100%;box-sizing:border-box;">
      </div>
      <div style="margin-bottom:18px;padding:12px 10px;background:#fffbe6;border-radius:12px;border:1px solid #eab30833;box-shadow:0 2px 8px #eab30822;display:flex;flex-direction:column;align-items:stretch;gap:6px;">
        <span style="color:#eab308;font-size:1em;font-weight:500;">Choisissez le type d’intervention souhaitée.</span>
        <label for="service-index" style="font-weight:500;color:#23272a;font-size:1.05em;">Service :</label>
        <select id="service-index" name="service" required style="padding:10px 12px;border-radius:8px;border:1px solid #eab30855;font-size:1em;background:#f8fafc;color:#23272a;width:100%;box-sizing:border-box;">
          <option value="">Service...</option>
          <option value="Révision">Révision</option>
          <option value="Diagnostic">Diagnostic</option>
          <option value="Carrosserie">Carrosserie</option>
        </select>
      </div>
      <div style="margin-bottom:18px;padding:12px 10px;background:#fffbe6;border-radius:12px;border:1px solid #eab30833;box-shadow:0 2px 8px #eab30822;display:flex;flex-direction:column;align-items:stretch;gap:6px;">
        <span style="color:#eab308;font-size:1em;font-weight:500;">Sélectionnez le créneau souhaité (du lundi au vendredi, 9h-18h).</span>
        <label for="date-index" style="font-weight:500;color:#23272a;font-size:1.05em;">Date et heure :</label>
        <input type="datetime-local" id="date-index" name="date" required style="padding:10px 12px;border-radius:8px;border:1px solid #eab30855;font-size:1em;background:#f8fafc;color:#23272a;width:100%;box-sizing:border-box;">
      </div>
      <button type="submit" style="width:100%;background:linear-gradient(90deg,#eab308 80%,#facc15 100%);color:#23272a;font-weight:bold;padding:12px 0;border:none;border-radius:8px;font-size:1.1em;box-shadow:0 2px 12px #eab30833;cursor:pointer;transition:background 0.2s;">Valider</button>
    </form>
    </div>
  </div>
</div>
<script>
document.getElementById('cta-rdv-popup').addEventListener('click', function() {
  document.getElementById('rdv-popup').style.display = 'flex';
});
document.getElementById('close-rdv-popup').addEventListener('click', function() {
  document.getElementById('rdv-popup').style.display = 'none';
});
document.getElementById('rdv-form-index').addEventListener('submit', function(e) {
  e.preventDefault();
  const data = Object.fromEntries(new FormData(this));
  fetch('http://localhost:3001/rdvs', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  })
  .then(res => {
    if(!res.ok) throw new Error('Erreur lors de la prise de rendez-vous');
    return res.json();
  })
  .then(rdv => {
    document.getElementById('rdv-popup').style.display = 'none';
    showRdvConfirmation(new Date(rdv.date).toLocaleString('fr-FR'));
  })
  .catch(err => {
    alert('Erreur serveur: ' + err.message);
  });
});
</script>
</body>
</html>