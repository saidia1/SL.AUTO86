<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>DEVIS GRATUIT - SL AUTO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/styles.css">
  <style>
    /* Responsive design pour mobile, tablette et PC */
    @media (max-width: 600px) {
      .devis-container {
        max-width: 98vw;
        margin: 16px 2vw;
        padding: 18px 6vw 18px 6vw;
        border-radius: 12px;
        box-shadow: 0 4px 16px #eab30833;
      }
      .devis-title {
        font-size: 1.3rem;
      }
      .devis-form input, .devis-form select, .devis-form textarea {
        font-size: 1em;
        padding: 9px 8px;
      }
      .devis-form button[type="submit"] {
        font-size: 1em;
        padding: 10px 0;
      }
    }
    @media (min-width: 601px) and (max-width: 1024px) {
      .devis-container {
        max-width: 90vw;
        margin: 32px auto;
        padding: 28px 8vw 24px 8vw;
        border-radius: 16px;
      }
      .devis-title {
        font-size: 1.7rem;
      }
      .devis-form input, .devis-form select, .devis-form textarea {
        font-size: 1.08em;
        padding: 10px 10px;
      }
      .devis-form button[type="submit"] {
        font-size: 1.08em;
        padding: 12px 0;
      }
    }
    body {
      background: linear-gradient(120deg, #f8fafc 0%, #e0e7ff 100%);
      color: #23272a;
      font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
      min-height: 100vh;
      margin: 0;
    }
    .devis-container {
      max-width: 480px;
      margin: 48px auto;
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 8px 32px #eab30833;
      padding: 36px 28px 28px 28px;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }
    .devis-title {
      font-size: 2rem;
      font-weight: bold;
      color: #eab308;
      text-align: center;
      margin-bottom: 12px;
    }
    .devis-form label,
    .devis-form .checkbox-group label,
    .vehicule-info {
      color: #000 !important;
    }
    .devis-form input,
    .devis-form select,
    .devis-form textarea {
      color: #000 !important;
      background: rgba(255,255,255,0.98) !important;
    }
    .devis-form input::placeholder,
    .devis-form textarea::placeholder {
      color: #000 !important;
      opacity: 1;
    }
    .devis-form input, .devis-form select {
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1.5px solid #eab30855;
      font-size: 1em;
      background: #f8fafc;
      color: #111;
      margin-bottom: 12px;
      box-sizing: border-box;
    }
    .devis-form .checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 18px;
      margin-bottom: 18px;
    }
    .devis-form .checkbox-group label {
      font-weight: 400;
      margin-bottom: 0;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .devis-form .total {
      font-size: 1.2em;
      font-weight: bold;
      color: #22c55e;
      text-align: right;
      margin-top: 10px;
    }
    .devis-form button[type="submit"] {
      width: 100%;
      background: linear-gradient(90deg, #eab308 80%, #facc15 100%);
      color: #23272a;
      font-weight: bold;
      padding: 12px 0;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      box-shadow: 0 2px 12px #eab30833;
      cursor: pointer;
      transition: background 0.2s;
    }
    .devis-form button[type="submit"]:hover {
      background: linear-gradient(90deg, #facc15 80%, #eab308 100%);
    }
    .vehicule-info {
      background: #fffbe6;
      border-radius: 10px;
      padding: 10px 14px;
      margin-bottom: 12px;
      color: #23272a;
      font-size: 0.98em;
      box-shadow: 0 1px 6px #eab30822;
    }
  </style>
</head>
  <body style="background:#23272a;">
  <div class="devis-container">
    <div class="devis-title">DEVIS GRATUIT - TARIF PIÈCE AUTOMOBILE</div>
    <form class="devis-form" id="devis-form">
      <label for="type-piece">Type de pièce :</label>
      <select id="type-piece" name="type-piece" required>
        <option value="">Sélectionner...</option>
        <option value="ampoule">Ampoule</option>
        <option value="phare">Phares antibrouillard</option>
        <option value="batterie">Batterie</option>
        <option value="plaquettes">Plaquettes de frein</option>
        <option value="disques">Disques de frein</option>
        <option value="pneus">Pneus</option>
        <option value="embrayage">Embrayage</option>
        <option value="alternateur">Alternateur</option>
        <option value="courroie">Courroie de distribution</option>
        <option value="filtre">Filtre à air</option>
        <option value="huile">Huile moteur</option>
        <option value="bougies">Bougies d'allumage</option>
        <option value="essuieglace">Essuie-glace</option>
        <option value="radiateur">Radiateur</option>
        <option value="pompe">Pompe à eau</option>
      </select>
      <label for="immat">Immatriculation :</label>
      <input type="text" id="immat" name="immat" placeholder="AA-123-BB" required>
      <div id="vehicule-info" class="vehicule-info" style="display:none;"></div>
      <label for="email">Email :</label>
      <input type="email" id="email" name="email" required>
      <div class="checkbox-group" id="reparations-group">
        <!-- Cases à cocher dynamiques -->
      </div>
      <div class="total" id="total">Total : 0 €</div>
      <button type="submit">Obtenir mon devis</button>
    </form>
  </div>
  <script>
    // Réparations disponibles selon le type de pièce
    const reparationsData = {
      ampoule: [
        { label: "Remplacement ampoule", value: "remplacement_ampoule", prix: 15 },
        { label: "Vérification circuit", value: "verif_circuit", prix: 10 }
      ],
      phare: [
        { label: "Remplacement phare", value: "remplacement_phare", prix: 40 },
        { label: "Réglage alignement", value: "reglage_alignement", prix: 20 }
      ],
      batterie: [
        { label: "Remplacement batterie", value: "remplacement_batterie", prix: 35 },
        { label: "Test de charge", value: "test_charge", prix: 12 }
      ],
      plaquettes: [
        { label: "Remplacement plaquettes", value: "remplacement_plaquettes", prix: 45 },
        { label: "Nettoyage étriers", value: "nettoyage_etriers", prix: 18 }
      ],
      disques: [
        { label: "Remplacement disques", value: "remplacement_disques", prix: 60 },
        { label: "Contrôle usure", value: "controle_usure", prix: 10 }
      ],
      pneus: [
        { label: "Montage pneus", value: "montage_pneus", prix: 25 },
        { label: "Équilibrage", value: "equilibrage", prix: 15 }
      ],
      embrayage: [
        { label: "Remplacement embrayage", value: "remplacement_embrayage", prix: 180 },
        { label: "Purge hydraulique", value: "purge_hydraulique", prix: 30 }
      ],
      alternateur: [
        { label: "Remplacement alternateur", value: "remplacement_alternateur", prix: 90 },
        { label: "Test de charge", value: "test_charge_alt", prix: 15 }
      ],
      courroie: [
        { label: "Remplacement courroie", value: "remplacement_courroie", prix: 120 },
        { label: "Contrôle galets", value: "controle_galets", prix: 20 }
      ],
      filtre: [
        { label: "Remplacement filtre à air", value: "remplacement_filtre", prix: 18 },
        { label: "Nettoyage boîtier", value: "nettoyage_boiter", prix: 8 }
      ],
      huile: [
        { label: "Vidange huile moteur", value: "vidange_huile", prix: 35 },
        { label: "Remplacement filtre à huile", value: "remplacement_filtre_huile", prix: 12 }
      ],
      bougies: [
        { label: "Remplacement bougies", value: "remplacement_bougies", prix: 28 },
        { label: "Contrôle allumage", value: "controle_allumage", prix: 10 }
      ],
      essuieglace: [
        { label: "Remplacement essuie-glace", value: "remplacement_essuieglace", prix: 10 },
        { label: "Nettoyage pare-brise", value: "nettoyage_parebrise", prix: 5 }
      ],
      radiateur: [
        { label: "Remplacement radiateur", value: "remplacement_radiateur", prix: 110 },
        { label: "Purge circuit", value: "purge_circuit", prix: 25 }
      ],
      pompe: [
        { label: "Remplacement pompe à eau", value: "remplacement_pompe", prix: 95 },
        { label: "Contrôle étanchéité", value: "controle_etancheite", prix: 15 }
      ]
    };
    const mainOeuvre = 30; // Forfait main d'oeuvre
    const form = document.getElementById('devis-form');
    const typePiece = document.getElementById('type-piece');
    const reparationsGroup = document.getElementById('reparations-group');
    const totalDiv = document.getElementById('total');
    const immatInput = document.getElementById('immat');
    const vehiculeInfoDiv = document.getElementById('vehicule-info');

    // Générer les cases à cocher selon le type de pièce
    typePiece.addEventListener('change', function() {
      reparationsGroup.innerHTML = '';
      const repList = reparationsData[typePiece.value] || [];
      repList.forEach(rep => {
        const label = document.createElement('label');
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.value = rep.value;
        checkbox.setAttribute('data-prix', rep.prix);
        label.appendChild(checkbox);
        label.appendChild(document.createTextNode(rep.label + ' (' + rep.prix + ' €)'));
        reparationsGroup.appendChild(label);
      });
      updateTotal();
    });

    // Calcul du total
    reparationsGroup.addEventListener('change', updateTotal);
    function updateTotal() {
      let total = 0;
      reparationsGroup.querySelectorAll('input[type=checkbox]:checked').forEach(cb => {
        total += parseFloat(cb.getAttribute('data-prix'));
      });
      if(total > 0) total += mainOeuvre;
      totalDiv.textContent = 'Total : ' + total + ' €';
    }

    // API d'immatriculation (mock ou vraie API)
    immatInput.addEventListener('blur', function() {
      const immat = immatInput.value.trim();
      if(!immat) return;
      // Exemple d'appel API (ici mock)
      vehiculeInfoDiv.style.display = 'block';
      vehiculeInfoDiv.textContent = 'Recherche du véhicule...';
      // Remplacer par une vraie API si besoin
      setTimeout(() => {
        // Mock : déduire le véhicule de l’immat (exemple)
        if(immat.toUpperCase().startsWith('AA')) {
          vehiculeInfoDiv.textContent = 'Peugeot 208 - Essence - 2019';
        } else if(immat.toUpperCase().startsWith('BB')) {
          vehiculeInfoDiv.textContent = 'Renault Clio - Diesel - 2017';
        } else {
          vehiculeInfoDiv.textContent = 'Véhicule inconnu (saisie manuelle possible lors du RDV)';
        }
      }, 900);
    });

    // Empêcher l'envoi réel du formulaire
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      alert('Votre demande de devis a bien été envoyée ! Vous recevrez une réponse par email.');
      form.reset();
      vehiculeInfoDiv.style.display = 'none';
      totalDiv.textContent = 'Total : 0 €';
      reparationsGroup.innerHTML = '';
    });
  </script>
</body>
</html>
